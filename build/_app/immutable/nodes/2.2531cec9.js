import{s as W,c as le,u as se,g as ae,d as oe,f as H,h as F,r as ue,i as P,b as fe,e as X,j as ie,o as ce,n as q}from"../chunks/scheduler.269df074.js";import{S as z,i as O,g as T,h as M,j as K,f as $,k as A,a as m,d as g,t as h,z as ee,A as Y,r as k,s as C,u as w,c as R,v as y,y as I,w as E,e as J,p as Q,b as S,m as b,n as v,o as G}from"../chunks/index.f81231ab.js";import{w as $e}from"../chunks/index.be147fa3.js";function de(s,e){const r={},t={},n={$$scope:1};let a=s.length;for(;a--;){const l=s[a],o=e[a];if(o){for(const i in l)i in o||(t[i]=1);for(const i in o)n[i]||(r[i]=o[i],n[i]=1);s[a]=o}else for(const i in l)n[i]=1}for(const l in t)l in r||(r[l]=void 0);return r}function me(s){let e,r,t;const n=s[2].default,a=le(n,s,s[1],null);return{c(){e=T("div"),a&&a.c(),this.h()},l(l){e=M(l,"DIV",{class:!0});var o=K(e);a&&a.l(o),o.forEach($),this.h()},h(){A(e,"class",r=`flex rounded-md border p-2 ${s[0].class}`)},m(l,o){m(l,e,o),a&&a.m(e,null),t=!0},p(l,[o]){a&&a.p&&(!t||o&2)&&se(a,n,l,l[1],t?oe(n,l[1],o,null):ae(l[1]),null),(!t||o&1&&r!==(r=`flex rounded-md border p-2 ${l[0].class}`))&&A(e,"class",r)},i(l){t||(g(a,l),t=!0)},o(l){h(a,l),t=!1},d(l){l&&$(e),a&&a.d(l)}}}function _e(s,e,r){let{$$slots:t={},$$scope:n}=e;return s.$$set=a=>{r(0,e=H(H({},e),F(a))),"$$scope"in a&&r(1,n=a.$$scope)},e=F(e),[e,n,t]}class N extends z{constructor(e){super(),O(this,e,_e,me,W,{})}}var U=(s=>(s[s.cellar=0]="cellar",s[s.tavern=1]="tavern",s[s.shop=2]="shop",s))(U||{});const te={scene:1,kills:0,energy:50,clickPower:1,maxEnergy:50,hiredAdventurers:0,adventurerKps:1/6,tavernMessage:`Ahoy there, intrepid adventurer! Welcome to "The Rat's Nest," where the rodents roam as free as the laughter and spirits flow. I'm Gump, the friendly face behind the bar, and I couldn't help but notice your determined aura as you entered. Now, I don't mean to be a bother, but we've found ourselves in a bit of a, shall we say, "cheesy" situation. You see, our beloved tavern has become a haven for our rat friends, and we're in dire need of a hero to help us regain control of the situation. What do you say? Could you lend us a hand in ridding our quaint establishment of these furry freeloaders? In return, I promise you the finest mug of "Rat's Tail Ale" and a feast that'll have you grinning from ear to ear!`,cellarMessage:`The tavern cellar is dark and damp. You hear a faint dripping sound. You can't see anything, but you can feel a cold stone wall to your left and a wooden door to your right."`};function ge(){const{subscribe:s,set:e,update:r}=$e(te);return{subscribe:s,manualKill:()=>r(t=>t.energy>0?{...t,kills:t.kills+t.clickPower,energy:t.energy-1}:t),adventurerKill:t=>r(n=>({...n,kills:n.kills+n.hiredAdventurers*n.adventurerKps*t})),gotoTavern:()=>r(t=>({...t,scene:1})),gotoCellar:()=>r(t=>({...t,scene:0})),gotoShop:()=>r(t=>({...t,scene:2})),hireAdventurers:t=>r(n=>({...n,hiredAdventurers:n.hiredAdventurers+t})),rest:()=>r(t=>({...t,energy:t.maxEnergy})),reset:()=>e(te)}}const V=ge();function he(s){let e,r,t,n,a;const l=s[3].default,o=le(l,s,s[2],null);let i=[{class:r=`rounded-md border-2 border-red-800 bg-gradient-to-b from-gray-200 to-gray-500
    p-1 text-black hover:from-gray-300 hover:to-gray-600 active:from-gray-600 
    active:to-gray-900 active:text-white disabled:cursor-not-allowed disabled:from-gray-400
    disabled:to-gray-700 disabled:text-gray-700`},s[1]],f={};for(let u=0;u<i.length;u+=1)f=H(f,i[u]);return{c(){e=T("button"),o&&o.c(),this.h()},l(u){e=M(u,"BUTTON",{class:!0});var c=K(e);o&&o.l(c),c.forEach($),this.h()},h(){ee(e,f)},m(u,c){m(u,e,c),o&&o.m(e,null),e.autofocus&&e.focus(),s[9](e),t=!0,n||(a=[Y(e,"click",s[4]),Y(e,"focus",s[5]),Y(e,"mouseover",s[6]),Y(e,"mouseenter",s[7]),Y(e,"mouseleave",s[8])],n=!0)},p(u,[c]){o&&o.p&&(!t||c&4)&&se(o,l,u,u[2],t?oe(l,u[2],c,null):ae(u[2]),null),ee(e,f=de(i,[{class:r},c&2&&u[1]]))},i(u){t||(g(o,u),t=!0)},o(u){h(o,u),t=!1},d(u){u&&$(e),o&&o.d(u),s[9](null),n=!1,ue(a)}}}function pe(s,e,r){let{$$slots:t={},$$scope:n}=e,{ref:a=null}=e;function l(_){P.call(this,s,_)}function o(_){P.call(this,s,_)}function i(_){P.call(this,s,_)}function f(_){P.call(this,s,_)}function u(_){P.call(this,s,_)}function c(_){fe[_?"unshift":"push"](()=>{a=_,r(0,a)})}return s.$$set=_=>{r(1,e=H(H({},e),F(_))),"ref"in _&&r(0,a=_.ref),"$$scope"in _&&r(2,n=_.$$scope)},e=F(e),[a,e,n,t,l,o,i,f,u,c]}class j extends z{constructor(e){super(),O(this,e,pe,he,W,{ref:0})}}function be(s){let e;return{c(){e=b("Kill a rat")},l(r){e=v(r,"Kill a rat")},m(r,t){m(r,e,t)},d(r){r&&$(e)}}}function re(s){let e,r;return e=new j({props:{$$slots:{default:[ve]},$$scope:{ctx:s}}}),e.$on("click",V.gotoTavern),{c(){k(e.$$.fragment)},l(t){w(e.$$.fragment,t)},m(t,n){y(e,t,n),r=!0},i(t){r||(g(e.$$.fragment,t),r=!0)},o(t){h(e.$$.fragment,t),r=!1},d(t){E(e,t)}}}function ve(s){let e;return{c(){e=b("Return to Tavern")},l(r){e=v(r,"Return to Tavern")},m(r,t){m(r,e,t)},d(r){r&&$(e)}}}function ke(s){let e,r,t,n,a,l,o;n=new j({props:{disabled:s[0].energy===0,$$slots:{default:[be]},$$scope:{ctx:s}}}),n.$on("click",V.kill);let i=s[0].kills>=50&&re(s);return{c(){e=T("img"),t=C(),k(n.$$.fragment),a=C(),i&&i.c(),l=J(),this.h()},l(f){e=M(f,"IMG",{src:!0,alt:!0,width:!0,height:!0}),t=R(f),w(n.$$.fragment,f),a=R(f),i&&i.l(f),l=J(),this.h()},h(){ie(e.src,r="cellar.webp")||A(e,"src",r),A(e,"alt","Cellar"),A(e,"width","200"),A(e,"height","200")},m(f,u){m(f,e,u),m(f,t,u),y(n,f,u),m(f,a,u),i&&i.m(f,u),m(f,l,u),o=!0},p(f,u){const c={};u&1&&(c.disabled=f[0].energy===0),u&2&&(c.$$scope={dirty:u,ctx:f}),n.$set(c),f[0].kills>=50?i?u&1&&g(i,1):(i=re(f),i.c(),g(i,1),i.m(l.parentNode,l)):i&&(Q(),h(i,1,1,()=>{i=null}),S())},i(f){o||(g(n.$$.fragment,f),g(i),o=!0)},o(f){h(n.$$.fragment,f),h(i),o=!1},d(f){f&&($(e),$(t),$(a),$(l)),E(n,f),i&&i.d(f)}}}function we(s){let e,r=s[0].cellarMessage+"",t;return{c(){e=T("div"),t=b(r)},l(n){e=M(n,"DIV",{});var a=K(e);t=v(a,r),a.forEach($)},m(n,a){m(n,e,a),I(e,t)},p(n,a){a&1&&r!==(r=n[0].cellarMessage+"")&&G(t,r)},d(n){n&&$(e)}}}function ye(s){let e,r,t,n,a;return r=new N({props:{class:"shrink-0 flex-col bg-green-950",$$slots:{default:[ke]},$$scope:{ctx:s}}}),n=new N({props:{class:"grow bg-green-950",$$slots:{default:[we]},$$scope:{ctx:s}}}),{c(){e=T("div"),k(r.$$.fragment),t=C(),k(n.$$.fragment),this.h()},l(l){e=M(l,"DIV",{class:!0});var o=K(e);w(r.$$.fragment,o),t=R(o),w(n.$$.fragment,o),o.forEach($),this.h()},h(){A(e,"class","flex")},m(l,o){m(l,e,o),y(r,e,null),I(e,t),y(n,e,null),a=!0},p(l,[o]){const i={};o&3&&(i.$$scope={dirty:o,ctx:l}),r.$set(i);const f={};o&3&&(f.$$scope={dirty:o,ctx:l}),n.$set(f)},i(l){a||(g(r.$$.fragment,l),g(n.$$.fragment,l),a=!0)},o(l){h(r.$$.fragment,l),h(n.$$.fragment,l),a=!1},d(l){l&&$(e),E(r),E(n)}}}function Ee(s,e,r){let t;return X(s,V,n=>r(0,t=n)),[t]}class Ae extends z{constructor(e){super(),O(this,e,Ee,ye,W,{})}}function Ie(s){let e;return{c(){e=b("Enter the Cellar")},l(r){e=v(r,"Enter the Cellar")},m(r,t){m(r,e,t)},d(r){r&&$(e)}}}function Te(s){let e;return{c(){e=b("Hire Adventurer")},l(r){e=v(r,"Hire Adventurer")},m(r,t){m(r,e,t)},d(r){r&&$(e)}}}function Me(s){let e;return{c(){e=b("Rest")},l(r){e=v(r,"Rest")},m(r,t){m(r,e,t)},d(r){r&&$(e)}}}function De(s){let e,r,t,n,a,l,o,i,f;return n=new j({props:{$$slots:{default:[Ie]},$$scope:{ctx:s}}}),n.$on("click",V.gotoCellar),l=new j({props:{$$slots:{default:[Te]},$$scope:{ctx:s}}}),l.$on("click",s[1]),i=new j({props:{disabled:s[0].energy===s[0].maxEnergy,$$slots:{default:[Me]},$$scope:{ctx:s}}}),i.$on("click",V.rest),{c(){e=T("img"),t=C(),k(n.$$.fragment),a=C(),k(l.$$.fragment),o=C(),k(i.$$.fragment),this.h()},l(u){e=M(u,"IMG",{src:!0,alt:!0,width:!0,height:!0}),t=R(u),w(n.$$.fragment,u),a=R(u),w(l.$$.fragment,u),o=R(u),w(i.$$.fragment,u),this.h()},h(){ie(e.src,r="barkeep.webp")||A(e,"src",r),A(e,"alt","Barkeep"),A(e,"width","200"),A(e,"height","200")},m(u,c){m(u,e,c),m(u,t,c),y(n,u,c),m(u,a,c),y(l,u,c),m(u,o,c),y(i,u,c),f=!0},p(u,c){const _={};c&4&&(_.$$scope={dirty:c,ctx:u}),n.$set(_);const D={};c&4&&(D.$$scope={dirty:c,ctx:u}),l.$set(D);const B={};c&1&&(B.disabled=u[0].energy===u[0].maxEnergy),c&4&&(B.$$scope={dirty:c,ctx:u}),i.$set(B)},i(u){f||(g(n.$$.fragment,u),g(l.$$.fragment,u),g(i.$$.fragment,u),f=!0)},o(u){h(n.$$.fragment,u),h(l.$$.fragment,u),h(i.$$.fragment,u),f=!1},d(u){u&&($(e),$(t),$(a),$(o)),E(n,u),E(l,u),E(i,u)}}}function Ce(s){let e=s[0].tavernMessage+"",r;return{c(){r=b(e)},l(t){r=v(t,e)},m(t,n){m(t,r,n)},p(t,n){n&1&&e!==(e=t[0].tavernMessage+"")&&G(r,e)},d(t){t&&$(r)}}}function Re(s){let e,r,t,n,a;return r=new N({props:{class:"shrink-0 flex-col bg-green-950",$$slots:{default:[De]},$$scope:{ctx:s}}}),n=new N({props:{class:"grow bg-green-950",$$slots:{default:[Ce]},$$scope:{ctx:s}}}),{c(){e=T("div"),k(r.$$.fragment),t=C(),k(n.$$.fragment),this.h()},l(l){e=M(l,"DIV",{class:!0});var o=K(e);w(r.$$.fragment,o),t=R(o),w(n.$$.fragment,o),o.forEach($),this.h()},h(){A(e,"class","flex")},m(l,o){m(l,e,o),y(r,e,null),I(e,t),y(n,e,null),a=!0},p(l,[o]){const i={};o&5&&(i.$$scope={dirty:o,ctx:l}),r.$set(i);const f={};o&5&&(f.$$scope={dirty:o,ctx:l}),n.$set(f)},i(l){a||(g(r.$$.fragment,l),g(n.$$.fragment,l),a=!0)},o(l){h(r.$$.fragment,l),h(n.$$.fragment,l),a=!1},d(l){l&&$(e),E(r),E(n)}}}function Ve(s,e,r){let t;return X(s,V,a=>r(0,t=a)),[t,()=>V.hireAdventurers(1)]}class Ke extends z{constructor(e){super(),O(this,e,Ve,Re,W,{})}}const Ne=s=>{V.adventurerKill(s)};function Be(s){let e,r,t=Math.floor(s[0].kills)+"",n;return{c(){e=T("div"),r=b("Rats killed: "),n=b(t)},l(a){e=M(a,"DIV",{});var l=K(e);r=v(l,"Rats killed: "),n=v(l,t),l.forEach($)},m(a,l){m(a,e,l),I(e,r),I(e,n)},p(a,l){l&1&&t!==(t=Math.floor(a[0].kills)+"")&&G(n,t)},d(a){a&&$(e)}}}function qe(s){let e,r,t=s[0].energy+"",n,a,l=s[0].maxEnergy+"",o;return{c(){e=T("div"),r=b("Energy: "),n=b(t),a=b(" / "),o=b(l)},l(i){e=M(i,"DIV",{});var f=K(e);r=v(f,"Energy: "),n=v(f,t),a=v(f," / "),o=v(f,l),f.forEach($)},m(i,f){m(i,e,f),I(e,r),I(e,n),I(e,a),I(e,o)},p(i,f){f&1&&t!==(t=i[0].energy+"")&&G(n,t),f&1&&l!==(l=i[0].maxEnergy+"")&&G(o,l)},d(i){i&&$(e)}}}function ne(s){let e,r;return e=new N({props:{class:"grow flex-col bg-red-950",$$slots:{default:[Ge]},$$scope:{ctx:s}}}),{c(){k(e.$$.fragment)},l(t){w(e.$$.fragment,t)},m(t,n){y(e,t,n),r=!0},p(t,n){const a={};n&3&&(a.$$scope={dirty:n,ctx:t}),e.$set(a)},i(t){r||(g(e.$$.fragment,t),r=!0)},o(t){h(e.$$.fragment,t),r=!1},d(t){E(e,t)}}}function Ge(s){let e,r,t=s[0].hiredAdventurers+"",n;return{c(){e=T("div"),r=b("Adventurers: "),n=b(t)},l(a){e=M(a,"DIV",{});var l=K(e);r=v(l,"Adventurers: "),n=v(l,t),l.forEach($)},m(a,l){m(a,e,l),I(e,r),I(e,n)},p(a,l){l&1&&t!==(t=a[0].hiredAdventurers+"")&&G(n,t)},d(a){a&&$(e)}}}function Pe(s){return{c:q,l:q,m:q,i:q,o:q,d:q}}function Ye(s){let e,r;return e=new Ke({}),{c(){k(e.$$.fragment)},l(t){w(e.$$.fragment,t)},m(t,n){y(e,t,n),r=!0},i(t){r||(g(e.$$.fragment,t),r=!0)},o(t){h(e.$$.fragment,t),r=!1},d(t){E(e,t)}}}function je(s){let e,r;return e=new Ae({}),{c(){k(e.$$.fragment)},l(t){w(e.$$.fragment,t)},m(t,n){y(e,t,n),r=!0},i(t){r||(g(e.$$.fragment,t),r=!0)},o(t){h(e.$$.fragment,t),r=!1},d(t){E(e,t)}}}function He(s){let e,r,t,n,a,l,o,i,f,u;r=new N({props:{class:"grow flex-col bg-red-950",$$slots:{default:[Be]},$$scope:{ctx:s}}}),n=new N({props:{class:"grow flex-col bg-red-950",$$slots:{default:[qe]},$$scope:{ctx:s}}});let c=s[0].hiredAdventurers>0&&ne(s);const _=[je,Ye,Pe],D=[];function B(d,p){return d[0].scene===U.cellar?0:d[0].scene===U.tavern?1:d[0].scene===U.shop?2:-1}return~(o=B(s))&&(i=D[o]=_[o](s)),{c(){e=T("div"),k(r.$$.fragment),t=C(),k(n.$$.fragment),a=C(),c&&c.c(),l=C(),i&&i.c(),f=J(),this.h()},l(d){e=M(d,"DIV",{class:!0});var p=K(e);w(r.$$.fragment,p),t=R(p),w(n.$$.fragment,p),a=R(p),c&&c.l(p),p.forEach($),l=R(d),i&&i.l(d),f=J(),this.h()},h(){A(e,"class","flex")},m(d,p){m(d,e,p),y(r,e,null),I(e,t),y(n,e,null),I(e,a),c&&c.m(e,null),m(d,l,p),~o&&D[o].m(d,p),m(d,f,p),u=!0},p(d,[p]){const Z={};p&3&&(Z.$$scope={dirty:p,ctx:d}),r.$set(Z);const x={};p&3&&(x.$$scope={dirty:p,ctx:d}),n.$set(x),d[0].hiredAdventurers>0?c?(c.p(d,p),p&1&&g(c,1)):(c=ne(d),c.c(),g(c,1),c.m(e,null)):c&&(Q(),h(c,1,1,()=>{c=null}),S());let L=o;o=B(d),o!==L&&(i&&(Q(),h(D[L],1,1,()=>{D[L]=null}),S()),~o?(i=D[o],i||(i=D[o]=_[o](d),i.c()),g(i,1),i.m(f.parentNode,f)):i=null)},i(d){u||(g(r.$$.fragment,d),g(n.$$.fragment,d),g(c),g(i),u=!0)},o(d){h(r.$$.fragment,d),h(n.$$.fragment,d),h(c),h(i),u=!1},d(d){d&&($(e),$(l),$(f)),E(r),E(n),c&&c.d(),~o&&D[o].d(d)}}}function We(s,e,r){let t;return X(s,V,n=>r(0,t=n)),ce(()=>{let n=Date.now();const a=()=>{const l=Date.now();Ne((l-n)/1e3),n=l,setTimeout(a,4)};a()}),[t]}class Fe extends z{constructor(e){super(),O(this,e,We,He,W,{})}}export{Fe as component};
